rules:
  columns:
    phone: phone_e164number
  # generators:
    # aaaaaaaaaaaaa: [id]
  actions:
    - table: user
      query: 'select * from `user` where username != "admin"'
      virtual_columns:
        domain: internet_domain
      columns:
        firstname: person_firstname
        lastname: person_lastname
        email: "{{ (firstname ~ '.' ~ lastname ~ '@' ~ domain)|lower }}"
    - table: company
      columns:
        name: company_name
    - table: post
      query: 'select * from post where company_id is not null'
      delete: true
    - table: training
      delete: true
